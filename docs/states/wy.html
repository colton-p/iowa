<html>

<head>
    <link rel="stylesheet" href="https://cdn.simplecss.org/simple.min.css">
</head>

<body>
    <p id="score-box"></p>
    <div style="display: flex">
        <div>
            <?xml version="1.0" encoding="utf-8" ?>
<svg baseProfile="full" fill="#d0d0d0" height="313.69893603166753" stroke="#ffffff" stroke-width="1" version="1.1" width="400.0" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink">
	<defs />
	<g id="counties"><path d="M 1.3027745769231551,283.215491335208 L 1.864912876455054,274.97756866326466 L 2.966210593085664,259.50550366314314 L 3.0382105685469916,258.4272308155467 L 57.52822185861405,262.01393287770014 L 59.61545488734349,262.10237302238534 L 57.11651672723279,305.95534189240436 L 52.93006834552278,305.7338707921776 L 28.999146392256417,304.3722583534167 L 0.0,302.3756223087063 L 1.3027745769231551,283.215491335208 z" id="c56041" />
		<path d="M 151.1912755953807,7.620603049610804 L 157.66566227529785,7.891037139214597 L 171.18105678428546,8.355657276356556 L 184.64339553866176,8.776541755037606 L 189.2427543736744,8.936499588176897 L 192.96241144080804,25.04415461463225 L 197.5624088526596,30.843164638809874 L 204.40077153171916,32.12223366036248 L 217.37785034978398,43.185364530119756 L 220.71559463043846,50.53402944649255 L 227.8918061108814,56.02628735135585 L 228.68967340964915,73.26303906356874 L 207.2517155678979,72.63143246934808 L 152.38668648465497,70.56159811772989 L 151.133220900711,70.28554018381483 L 152.25141393861117,43.898241728820075 L 152.34644060555226,17.372626165205453 L 151.1912755953807,7.620603049610804 z" id="c56003" />
		<path d="M 217.37785034978398,43.185364530119756 L 268.1713638967207,44.49462186818742 L 269.7011386744412,44.12880745227074 L 290.8150938477435,44.24237124841617 L 290.5221592725091,47.487357382879935 L 290.2659905586095,100.30951451162994 L 289.56673925924116,124.9685687700936 L 286.2293416323494,124.97085222702262 L 230.58166362317255,124.18026309815767 L 229.4695019099772,123.55783734919834 L 229.10463377261715,99.69762851776473 L 229.6762592001035,73.67063973725115 L 228.68967340964915,73.26303906356874 L 227.8918061108814,56.02628735135585 L 220.71559463043846,50.53402944649255 L 217.37785034978398,43.185364530119756 z" id="c56019" />
		<path d="M 329.6481853627228,192.33801100892072 L 351.62602184396445,192.0829350370048 L 364.8320271673055,191.98172822511228 L 365.3943341644381,264.1877096034805 L 330.01610314143403,263.9947716090269 L 330.3878139436026,257.5505434935582 L 329.7750387374076,205.50696437730153 L 329.6481853627228,192.33801100892072 z" id="c56031" />
		<path d="M 340.7005890498839,27.646223586520403 L 341.158716921298,11.520403753844258 L 343.2137685434499,11.518006335718463 L 343.9096785968728,11.516974042653981 L 395.7631208321836,11.332832232883726 L 396.18042262110913,34.45009610795822 L 396.31044795483393,43.539847847755006 L 396.6560756616295,67.78334443986526 L 396.7262343278741,73.03965484303644 L 341.0817379591488,73.76257764927239 L 340.87166762712343,72.42237999047023 L 340.7005890498839,27.646223586520403 z" id="c56011" />
		<path d="M 204.13846196658523,177.21192147317635 L 206.47988704585663,177.28490318468693 L 207.15711704370815,151.11200298976024 L 207.0763651833821,125.06765597205484 L 206.15550286894896,122.87230246686629 L 229.4695019099772,123.55783734919834 L 230.58166362317255,124.18026309815767 L 286.2293416323494,124.97085222702262 L 285.9532352543109,177.75563265424904 L 285.69644437112686,179.07288461302397 L 285.4845115133096,205.10216731775725 L 254.7694022208641,204.88009189180653 L 204.55412793636742,203.45960675371546 L 203.4997285513741,202.86470535805597 L 204.13846196658523,177.21192147317635 z" id="c56025" />
		<path d="M 18.932962944508837,25.26599119637164 L 39.8182133420567,26.727974917956406 L 39.389803684845205,33.03460106498263 L 55.18340657295812,34.05678476162813 L 59.28765086044695,36.98367025123484 L 60.19893733896333,39.48191569657584 L 58.709846072953475,45.782518947134555 L 62.13387345079465,50.35579873220137 L 62.2150436904766,53.26665155597831 L 65.94730553027702,56.75979629132718 L 67.68286566705135,63.921717965765914 L 66.94855316222771,68.94040186840401 L 70.53004179406486,69.15172914746856 L 69.9800879995629,78.56354192906662 L 67.64355626398847,119.59781672697328 L 66.9412688415442,126.15110269969112 L 51.13588906112171,125.18349614331393 L 50.7427348557571,131.7365926241477 L 37.81172751685197,130.87885712844098 L 37.51982840774276,135.1388928958832 L 24.523417893214255,134.28050405172834 L 24.926508329566303,128.33156738446013 L 12.216546197898444,127.31654698633251 L 13.16603644531456,113.31518338990062 L 14.126708724702791,99.2031562539846 L 15.29179437160178,82.5446987722907 L 15.658559549610425,76.87289756168191 L 16.302217053245013,66.94325182146994 L 17.67661798724783,47.29524230628756 L 18.226112253171095,39.80721089504731 L 18.713401005027546,28.388586058763533 L 18.932962944508837,25.26599119637164 z" id="c56039" />
		<path d="M 189.2427543736744,8.936499588176897 L 219.2557739599387,9.86042449943739 L 244.0401110073331,10.875476248645349 L 277.536442172348,11.61665694062162 L 277.5433603808015,11.61678331359831 L 290.33973308605624,11.484400475697816 L 290.8150938477435,44.24237124841617 L 269.7011386744412,44.12880745227074 L 268.1713638967207,44.49462186818742 L 217.37785034978398,43.185364530119756 L 204.40077153171916,32.12223366036248 L 197.5624088526596,30.843164638809874 L 192.96241144080804,25.04415461463225 L 189.2427543736744,8.936499588176897 z" id="c56033" />
		<path d="M 179.9101083663617,261.26875151530885 L 203.685239867302,262.1354049361433 L 203.86425382541302,229.61410836273637 L 204.2041822739732,216.49160442554293 L 204.55412793636742,203.45960675371546 L 254.7694022208641,204.88009189180653 L 285.4845115133096,205.10216731775725 L 285.621491526779,205.1022729615895 L 285.2577439371315,231.26729578755464 L 285.0769004570053,283.4811564469603 L 270.6120723459161,283.30083103723837 L 270.3119128348471,313.26333998503026 L 239.47981723518046,312.5714427896278 L 213.32544669591462,311.8350832656752 L 210.48674115867362,311.7469052282778 L 178.97323417073142,310.99221707801894 L 179.2712608854438,280.9779742021244 L 179.9101083663617,261.26875151530885 z" id="c56007" />
		<path d="M 32.802792542618505,169.4202558156202 L 34.79296362466129,169.55024378416132 L 36.46917693887439,143.34383638443796 L 37.51982840774276,135.1388928958832 L 37.81172751685197,130.87885712844098 L 50.7427348557571,131.7365926241477 L 51.13588906112171,125.18349614331393 L 66.9412688415442,126.15110269969112 L 67.64355626398847,119.59781672697328 L 83.96695085395787,120.64815129987186 L 83.57573222399279,127.99701515892377 L 86.85628828143348,128.157887829657 L 86.56420957603802,135.80158995074916 L 88.44420006073062,143.3253104317668 L 93.14347204514011,149.8983605992091 L 93.2985011830046,155.2831781714209 L 96.07110408140149,155.58090199574693 L 101.59933320086985,161.262725898475 L 105.43515478386031,167.15719068238366 L 115.60930118703513,177.2142818788045 L 115.33607791176047,180.47062168825448 L 118.76559841894198,180.68931974287105 L 119.48423071967322,200.38776729982928 L 118.89476310038597,213.22168952996503 L 93.48999920189789,212.0235574822292 L 62.280480060661496,209.76900671455763 L 34.94392223677587,207.60636936454844 L 35.668137858494035,194.6818413460693 L 33.04978309787342,194.52244626449465 L 34.322450760780534,174.76065402827095 L 32.46237525475905,174.63336853343583 L 32.802792542618505,169.4202558156202 z" id="c56035" />
		<path d="M 69.9800879995629,78.56354192906662 L 73.15921080878361,83.21933950430595 L 80.3631719498446,82.95939985834369 L 82.33432506503502,88.93973860149069 L 80.60620445998443,93.43888899213509 L 83.46460685880116,94.85845880654495 L 90.42254740087041,92.02516561527642 L 92.05480138081364,86.27680561399916 L 97.63980857712897,83.65554690069366 L 102.97244029205646,86.27700636332712 L 109.59150101884745,95.48482324090413 L 116.91284366794085,104.48335376320487 L 116.61246281671103,110.48189206760412 L 129.6408466287062,111.13794411479168 L 136.1711414295699,112.48227118844879 L 136.0725521295511,114.72522521384735 L 142.6400734921229,114.993947107864 L 142.47853894483066,118.27811430343634 L 149.01262506590174,118.528156859316 L 148.9218510172443,120.74085667382724 L 155.4742959222267,121.01244775936867 L 161.89636516729314,124.54363066761556 L 171.91418460881025,124.09302875050298 L 202.7800304373578,124.97303262932022 L 202.84596559786797,122.77423869318022 L 206.15550286894896,122.87230246686629 L 207.0763651833821,125.06765597205484 L 207.15711704370815,151.11200298976024 L 206.47988704585663,177.28490318468693 L 204.13846196658523,177.21192147317635 L 203.4997285513741,202.86470535805597 L 204.55412793636742,203.45960675371546 L 204.2041822739732,216.49160442554293 L 197.67484998136646,216.33669311176334 L 135.03628852162237,213.9912480540503 L 118.89476310038597,213.22168952996503 L 119.48423071967322,200.38776729982928 L 118.76559841894198,180.68931974287105 L 115.33607791176047,180.47062168825448 L 115.60930118703513,177.2142818788045 L 105.43515478386031,167.15719068238366 L 101.59933320086985,161.262725898475 L 96.07110408140149,155.58090199574693 L 93.2985011830046,155.2831781714209 L 93.14347204514011,149.8983605992091 L 88.44420006073062,143.3253104317668 L 86.56420957603802,135.80158995074916 L 86.85628828143348,128.157887829657 L 83.57573222399279,127.99701515892377 L 83.96695085395787,120.64815129987186 L 67.64355626398847,119.59781672697328 L 69.9800879995629,78.56354192906662 z" id="c56013" />
		<path d="M 290.33973308605624,11.484400475697816 L 299.8172119858396,11.36204049500712 L 341.158716921298,11.520403753844258 L 340.7005890498839,27.646223586520403 L 340.87166762712343,72.42237999047023 L 341.0817379591488,73.76257764927239 L 341.1074373074248,124.94256601164551 L 289.56673925924116,124.9685687700936 L 290.2659905586095,100.30951451162994 L 290.5221592725091,47.487357382879935 L 290.8150938477435,44.24237124841617 L 290.33973308605624,11.484400475697816 z" id="c56005" />
		<path d="M 152.38668648465497,70.56159811772989 L 207.2517155678979,72.63143246934808 L 228.68967340964915,73.26303906356874 L 229.6762592001035,73.67063973725115 L 229.10463377261715,99.69762851776473 L 229.4695019099772,123.55783734919834 L 206.15550286894896,122.87230246686629 L 202.84596559786797,122.77423869318022 L 203.16327191930662,111.82207971124828 L 196.52301597356552,111.67281719122086 L 196.7451610055051,105.05979631566969 L 183.56490420789072,104.62716867819672 L 183.78893707161987,98.19167097319853 L 171.84243869666147,97.74995731876184 L 171.35906823595963,95.5176319141689 L 164.55320029591883,95.38759875491056 L 164.73422219262173,91.11108376090239 L 158.17089811979577,90.84883917052188 L 158.57218794523632,84.15550296877808 L 155.1711697014854,84.03386755203412 L 155.39425397105745,77.39404051354335 L 152.09914790976495,77.28671403901379 L 152.38668648465497,70.56159811772989 z" id="c56043" />
		<path d="M 341.0817379591488,73.76257764927239 L 396.7262343278741,73.03965484303644 L 396.76581080645735,76.00775090688511 L 397.05453271554586,97.72726997620744 L 397.3780002190912,119.99430946062631 L 397.4468499661273,124.16813177599875 L 350.99378809165864,124.83133048690345 L 341.1074373074248,124.94256601164551 L 341.0817379591488,73.76257764927239 z" id="c56045" />
		<path d="M 270.6120723459161,283.30083103723837 L 285.0769004570053,283.4811564469603 L 285.2577439371315,231.26729578755464 L 285.621491526779,205.1022729615895 L 314.5549183467393,205.52339664392824 L 313.4393525279775,209.53990129533003 L 311.27085326059387,215.02971522187374 L 316.16755543320994,216.23037856754007 L 324.62409353587014,216.161978420033 L 327.0497305080082,205.5247670765989 L 329.7750387374076,205.50696437730153 L 330.3878139436026,257.5505434935582 L 330.01610314143403,263.9947716090269 L 330.0308757994137,313.69893603166753 L 330.01497815150515,313.6989097306329 L 277.78085501882987,313.39185840608616 L 276.2357324041919,313.3744554613761 L 270.3119128348471,313.26333998503026 L 270.6120723459161,283.30083103723837 z" id="c56001" />
		<path d="M 109.59150101884745,95.48482324090413 L 121.60283888598934,95.74417897829441 L 121.95443872524197,89.18647529836582 L 131.78944682274843,89.62260713526781 L 131.91033688220298,83.11209346046498 L 138.6833385325389,83.40018644196489 L 138.95078088307352,76.7103777755822 L 152.09914790976495,77.28671403901379 L 155.39425397105745,77.39404051354335 L 155.1711697014854,84.03386755203412 L 158.57218794523632,84.15550296877808 L 158.17089811979577,90.84883917052188 L 164.73422219262173,91.11108376090239 L 164.55320029591883,95.38759875491056 L 171.35906823595963,95.5176319141689 L 171.84243869666147,97.74995731876184 L 183.78893707161987,98.19167097319853 L 183.56490420789072,104.62716867819672 L 196.7451610055051,105.05979631566969 L 196.52301597356552,111.67281719122086 L 203.16327191930662,111.82207971124828 L 202.84596559786797,122.77423869318022 L 202.7800304373578,124.97303262932022 L 171.91418460881025,124.09302875050298 L 161.89636516729314,124.54363066761556 L 155.4742959222267,121.01244775936867 L 148.9218510172443,120.74085667382724 L 149.01262506590174,118.528156859316 L 142.47853894483066,118.27811430343634 L 142.6400734921229,114.993947107864 L 136.0725521295511,114.72522521384735 L 136.1711414295699,112.48227118844879 L 129.6408466287062,111.13794411479168 L 116.61246281671103,110.48189206760412 L 116.91284366794085,104.48335376320487 L 109.59150101884745,95.48482324090413 z" id="c56017" />
		<path d="M 286.2293416323494,124.97085222702262 L 289.56673925924116,124.9685687700936 L 341.1074373074248,124.94256601164551 L 350.99378809165864,124.83133048690345 L 351.24728347866915,178.9399880098444 L 351.62602184396445,192.0829350370048 L 329.6481853627228,192.33801100892072 L 329.7750387374076,205.50696437730153 L 327.0497305080082,205.5247670765989 L 324.62409353587014,216.161978420033 L 316.16755543320994,216.23037856754007 L 311.27085326059387,215.02971522187374 L 313.4393525279775,209.53990129533003 L 314.5549183467393,205.52339664392824 L 285.621491526779,205.1022729615895 L 285.4845115133096,205.10216731775725 L 285.69644437112686,179.07288461302397 L 285.9532352543109,177.75563265424904 L 286.2293416323494,124.97085222702262 z" id="c56009" />
		<path d="M 364.8320271673055,191.98172822511228 L 367.274631462075,192.01776445889124 L 398.4577630392179,191.48533165669824 L 398.54392276440507,199.92675641799883 L 398.8088046974719,218.8011567448241 L 399.04248250682934,236.440027330272 L 399.0549593474829,237.54223324691242 L 399.1541329448134,246.31874427925533 L 399.34886880883437,260.47383366388897 L 399.43619501993976,266.83580036061994 L 399.49001949160066,270.56484765293675 L 365.4534681712365,270.8299066478071 L 365.3943341644381,264.1877096034805 L 364.8320271673055,191.98172822511228 z" id="c56015" />
		<path d="M 6.969990942803247,200.29397707437482 L 7.920009753658772,187.87540499399458 L 9.128640639222317,172.11855992499056 L 10.38524275011785,153.85131763636406 L 10.67143251637795,149.69991999608848 L 10.947499124730001,145.69960708824973 L 12.216546197898444,127.31654698633251 L 24.926508329566303,128.33156738446013 L 24.523417893214255,134.28050405172834 L 37.51982840774276,135.1388928958832 L 36.46917693887439,143.34383638443796 L 34.79296362466129,169.55024378416132 L 32.802792542618505,169.4202558156202 L 32.46237525475905,174.63336853343583 L 34.322450760780534,174.76065402827095 L 33.04978309787342,194.52244626449465 L 35.668137858494035,194.6818413460693 L 34.94392223677587,207.60636936454844 L 62.280480060661496,209.76900671455763 L 59.61545488734349,262.10237302238534 L 57.52822185861405,262.01393287770014 L 3.0382105685469916,258.4272308155467 L 5.175089355702996,226.5698485745689 L 6.969990942803247,200.29397707437482 z" id="c56023" />
		<path d="M 350.99378809165864,124.83133048690345 L 397.4468499661273,124.16813177599875 L 397.47861581829187,126.09451578645259 L 397.7124992055984,140.29104424314355 L 398.04408998845236,162.1285364453788 L 398.44297191016835,190.03937771824647 L 398.4577630392179,191.48533165669824 L 367.274631462075,192.01776445889124 L 364.8320271673055,191.98172822511228 L 351.62602184396445,192.0829350370048 L 351.24728347866915,178.9399880098444 L 350.99378809165864,124.83133048690345 z" id="c56027" />
		<path d="M 19.94882629873866,10.123793245054268 L 21.361117125102762,0.03495179469382952 L 21.366007330951103,0.0 L 35.267851298605216,0.8675491118626629 L 39.48552543315503,1.965405800855109 L 59.92941146550242,2.8003476668579466 L 77.59942987926091,3.5873578502772485 L 88.13147971529766,4.222842841714023 L 100.14227719087032,4.916154062707787 L 125.38681703186012,5.970560317751804 L 127.57069182479826,6.551804876137129 L 151.1912755953807,7.620603049610804 L 152.34644060555226,17.372626165205453 L 152.25141393861117,43.898241728820075 L 151.133220900711,70.28554018381483 L 152.38668648465497,70.56159811772989 L 152.09914790976495,77.28671403901379 L 138.95078088307352,76.7103777755822 L 138.6833385325389,83.40018644196489 L 131.91033688220298,83.11209346046498 L 131.78944682274843,89.62260713526781 L 121.95443872524197,89.18647529836582 L 121.60283888598934,95.74417897829441 L 109.59150101884745,95.48482324090413 L 102.97244029205646,86.27700636332712 L 97.63980857712897,83.65554690069366 L 92.05480138081364,86.27680561399916 L 90.42254740087041,92.02516561527642 L 83.46460685880116,94.85845880654495 L 80.60620445998443,93.43888899213509 L 82.33432506503502,88.93973860149069 L 80.3631719498446,82.95939985834369 L 73.15921080878361,83.21933950430595 L 69.9800879995629,78.56354192906662 L 70.53004179406486,69.15172914746856 L 66.94855316222771,68.94040186840401 L 67.68286566705135,63.921717965765914 L 65.94730553027702,56.75979629132718 L 62.2150436904766,53.26665155597831 L 62.13387345079465,50.35579873220137 L 58.709846072953475,45.782518947134555 L 60.19893733896333,39.48191569657584 L 59.28765086044695,36.98367025123484 L 55.18340657295812,34.05678476162813 L 39.389803684845205,33.03460106498263 L 39.8182133420567,26.727974917956406 L 18.932962944508837,25.26599119637164 L 19.247086942455926,20.802858503600586 L 19.94882629873866,10.123793245054268 z" id="c56029" />
		<path d="M 62.280480060661496,209.76900671455763 L 93.48999920189789,212.0235574822292 L 118.89476310038597,213.22168952996503 L 135.03628852162237,213.9912480540503 L 197.67484998136646,216.33669311176334 L 204.2041822739732,216.49160442554293 L 203.86425382541302,229.61410836273637 L 203.685239867302,262.1354049361433 L 179.9101083663617,261.26875151530885 L 179.2712608854438,280.9779742021244 L 178.97323417073142,310.99221707801894 L 159.96919956399367,310.4408372210722 L 114.24555784931647,308.5734097470479 L 102.7687371230321,308.022548579993 L 76.17601520267594,306.9190145412528 L 59.84995609897622,306.0980410429199 L 57.11651672723279,305.95534189240436 L 59.61545488734349,262.10237302238534 L 62.280480060661496,209.76900671455763 z" id="c56037" />
		<path d="M 330.01610314143403,263.9947716090269 L 365.3943341644381,264.1877096034805 L 365.4534681712365,270.8299066478071 L 399.49001949160066,270.56484765293675 L 399.67600260655956,283.47043538464453 L 399.6760852767967,283.47745561574794 L 399.77817778250494,292.1592265536432 L 399.8971772023016,304.5196874717282 L 400.0,313.05299192238556 L 374.62153937509487,313.28197093752 L 354.1391933947607,313.6805948829879 L 349.1013247600627,313.694046035555 L 330.0308757994137,313.69893603166753 L 330.01610314143403,263.9947716090269 z" id="c56021" />
	</g>
</svg>
            <table>
                <thead>
                    <th></th>
                    <th>size</th>
                    <th>diff</th>
                </thead>
                <tbody id="group-pops">

                </tbody>
            </table>
            <div id="valid-box"></div>
            <div id="best-score-box" style="font-style: italic"></div>
        </div>
        <div id='hover-text' style="width: 200px"></div>
        <ul id="sorted-list"> </ul>
    </div>

    <hr>

    <footer id="footer">
        <a href="?k=2">k = 2</a>
        <a href="?k=3">k = 3</a>
        <a href="?k=4">k = 4</a>
        <br>
        
        <a href="de.html">de</a>
        
        <a href="ri.html">ri</a>
        
        <a href="ct.html">ct</a>
        
        <a href="nh.html">nh</a>
        
        <a href="ma.html">ma</a>
        
        <a href="vt.html">vt</a>
        
        <a href="az.html">az</a>
        
        <a href="me.html">me</a>
        
        <a href="nv.html">nv</a>
        
        <a href="nj.html">nj</a>
        
        <a href="wy.html">wy</a>
        
        <a href="md.html">md</a>
        
        <a href="ut.html">ut</a>
        
        <a href="nm.html">nm</a>
        
        <a href="or.html">or</a>
        
        <a href="wa.html">wa</a>
        
        <a href="id.html">id</a>
        
        <a href="sc.html">sc</a>
        
        <a href="nd.html">nd</a>
        
        <a href="wv.html">wv</a>
        
        <a href="mt.html">mt</a>
        
        <a href="ca.html">ca</a>
        
        <a href="ny.html">ny</a>
        
        <a href="co.html">co</a>
        
        <a href="la.html">la</a>
        
        <a href="sd.html">sd</a>
        
        <a href="al.html">al</a>
        
        <a href="fl.html">fl</a>
        
        <a href="pa.html">pa</a>
        
        <a href="wi.html">wi</a>
        
        <a href="ar.html">ar</a>
        
        <a href="ok.html">ok</a>
        
        <a href="ms.html">ms</a>
        
        <a href="mi.html">mi</a>
        
        <a href="mn.html">mn</a>
        
        <a href="oh.html">oh</a>
        
        <a href="in.html">in</a>
        
        <a href="ne.html">ne</a>
        
        <a href="tn.html">tn</a>
        
        <a href="ia.html">ia</a>
        
        <a href="nc.html">nc</a>
        
        <a href="il.html">il</a>
        
        <a href="ks.html">ks</a>
        
        <a href="mo.html">mo</a>
        
        <a href="ky.html">ky</a>
        
        <a href="va.html">va</a>
        
        <a href="ga.html">ga</a>
        
        <a href="tx.html">tx</a>
        
        <br>
        <a href="../index.html">index</a>
    </footer>

</body>

<script> const STATE = 'wy'</script>
<script>const COUNTY_DATA = {"c56001":{"name":"Albany","pop":37066,"adj":["c08057","c08069","c56007","c56009","c56021","c56031"]},"c56003":{"name":"Big Horn","pop":11521,"adj":["c30003","c30009","c56019","c56029","c56033","c56043"]},"c56005":{"name":"Campbell","pop":47026,"adj":["c30075","c56009","c56011","c56019","c56033","c56045"]},"c56007":{"name":"Carbon","pop":14537,"adj":["c08057","c08081","c08107","c56001","c56009","c56013","c56025","c56037"]},"c56009":{"name":"Converse","pop":13751,"adj":["c56001","c56005","c56007","c56019","c56025","c56027","c56031","c56045"]},"c56011":{"name":"Crook","pop":7181,"adj":["c30011","c30075","c46019","c46081","c56005","c56045"]},"c56013":{"name":"Fremont","pop":39234,"adj":["c56007","c56017","c56025","c56029","c56035","c56037","c56039","c56043"]},"c56015":{"name":"Goshen","pop":12498,"adj":["c31007","c31157","c31165","c56021","c56027","c56031"]},"c56017":{"name":"Hot Springs","pop":4621,"adj":["c56013","c56029","c56043"]},"c56019":{"name":"Johnson","pop":8447,"adj":["c56003","c56005","c56009","c56025","c56033","c56043"]},"c56021":{"name":"Laramie","pop":100512,"adj":["c08069","c08123","c31007","c31105","c56001","c56015","c56031"]},"c56023":{"name":"Lincoln","pop":19581,"adj":["c16007","c16019","c16029","c49033","c56035","c56037","c56039","c56041"]},"c56025":{"name":"Natrona","pop":79955,"adj":["c56007","c56009","c56013","c56019","c56043"]},"c56027":{"name":"Niobrara","pop":2467,"adj":["c31165","c46033","c46047","c56009","c56015","c56031","c56045"]},"c56029":{"name":"Park","pop":29624,"adj":["c30009","c30031","c30067","c56003","c56013","c56017","c56039","c56043"]},"c56031":{"name":"Platte","pop":8605,"adj":["c56001","c56009","c56015","c56021","c56027"]},"c56033":{"name":"Sheridan","pop":30921,"adj":["c30003","c30075","c56003","c56005","c56019"]},"c56035":{"name":"Sublette","pop":8728,"adj":["c56013","c56023","c56037","c56039"]},"c56037":{"name":"Sweetwater","pop":42272,"adj":["c08081","c49009","c49043","c56007","c56013","c56023","c56035","c56041"]},"c56039":{"name":"Teton","pop":23331,"adj":["c16019","c16043","c16081","c30031","c56013","c56023","c56029","c56035"]},"c56041":{"name":"Uinta","pop":20450,"adj":["c49033","c49043","c56023","c56037"]},"c56043":{"name":"Washakie","pop":7685,"adj":["c56003","c56013","c56017","c56019","c56025","c56029"]},"c56045":{"name":"Weston","pop":6838,"adj":["c46033","c46081","c46103","c56005","c56009","c56011","c56027"]}}; </script>
<script>const COLORS = ['darkgreen', 'blue', 'darkorange', 'purple', 'red', 'brown'];
const N_GROUPS = Number.parseInt(new URLSearchParams(document.location.search).get('k')) || 4;

const FMT = {
    human: (v) => new Intl.NumberFormat('en', { notation: 'compact' }).format(v),
    long: (v) => new Intl.NumberFormat('fr-FR').format(v),
}


function isValid() {
    const group_ixs = Array(N_GROUPS).fill(0).map((v, ix) => ix);

    const bad_groups = group_ixs.filter(ix => !isGroupConnected(ix));
    
    return [bad_groups.length === 0, bad_groups];
}

function isGroupConnected(grp) {
    const seen = {};
    function dfs(u) {
        seen[u] = true;
        const adj = COUNTY_DATA[u].adj.filter(v => GROUPS[v] === grp && !seen[v] && COUNTY_DATA[v]);
        adj.forEach(dfs);
    }
    const inGroup = Object.keys(GROUPS).filter(k => GROUPS[k] === grp);
    if (inGroup.length === 0) { return false; }
    dfs(inGroup[0]);

    return inGroup.sort().join(';') === Object.keys(seen).sort().join(';')
}


const makeToggle = (cid) => () => {
    toggleGroup(cid);
    updateDisplay([cid]);
}

function toggleGroup(cid) {
    const old_grp = GROUPS[cid];
    const new_grp = (old_grp+1) % N_GROUPS;
    GROUPS[cid] = new_grp;
}

const onMouseOver = function() {
    const el = document.getElementById('hover-text');
    const {name, pop} = COUNTY_DATA[this.id];

    el.textContent = `${name}\n${FMT.long(pop)}`;
}

function updateDisplay(cids) {
    cids.forEach(cid => {
        const grp = GROUPS[cid];
        const color = COLORS[grp]

        document.getElementById('list-'+cid).style.color = color;
        document.getElementById(cid).style.fill = color;
    });

    const rslt = sumGroups();
    Object.entries(rslt).forEach(([group, pop]) => {
        const row = [FMT.human(pop), FMT.long(pop), FMT.long(Math.floor(pop - TOTAL / N_GROUPS))];
        //textContent = FMT.human(pop) + "\t" + FMT.long(pop) + "\t" + Math.floor(pop - TOTAL / N_GROUPS);
        document.getElementById(`pop-${group}`).innerHTML =  row.map(v => `<td>${v}</td>`).join('')
    });

    const lsKey = `${STATE}-${N_GROUPS}`;
    const score = Math.floor(TOTAL/N_GROUPS - Math.min(...Object.values(rslt)));
    let bestScore = localStorage.getItem(lsKey) || '';
    const [valid, badGroups] = isValid();
    document.getElementById('score-box').innerHTML = `score: <b>${FMT.long(score)}</b>`;
    if (valid) {
        document.getElementById('valid-box').textContent = '✅ valid';
    } else {
        document.getElementById('valid-box').textContent = `❌ group ${badGroups[0]} not connected`
    }
    if (valid && Number(bestScore || TOTAL) > score) {
        bestScore = score;
        localStorage.setItem(lsKey, score);
        localStorage.setItem(lsKey+'-groups', JSON.stringify(friendlyGroups()));
    }

    document.getElementById('best-score-box').textContent = 'best: ' + FMT.long(bestScore);
}

function sumGroups() {
    const rslt = Object.fromEntries(Array(N_GROUPS).fill(0).map((v, ix) => [ix, 0]));
    Object.entries(GROUPS).forEach(([id, group]) => {
        const pop = COUNTY_DATA[id].pop;
        rslt[group] += pop;
    });

    return rslt;
}

function friendlyGroups() {
    const rslt = Object.fromEntries(Array(N_GROUPS).fill(0).map((v, ix) => [ix, []]));
    Object.entries(GROUPS).forEach(([id, grp]) => {
        rslt[grp].push(COUNTY_DATA[id].name);
    });
    return rslt;
}

function setup() {
    const county_els = Array.from(document.getElementsByTagName('path'));
    const county_ids = county_els.map(e => e.id);

    // map handlers
    county_els.forEach(path_el => {
        path_el.onmouseover = onMouseOver.bind(path_el);
        path_el.onclick = makeToggle(path_el.id);
    });

    // sorted list
    const sorted_counties = county_ids.map(cid => ({...COUNTY_DATA[cid], id: cid}));

    sorted_counties.sort((a,b) => b.pop - a.pop);
    //sorted_counties.sort((a,b) => b.name > a.name ? -1 : 1);

    const list_el = document.getElementById('sorted-list');
    sorted_counties.forEach(({id, name, pop}) => {
        const li = document.createElement("li");
        li.id = 'list-'+id;
        li.onclick = makeToggle(id);
        li.appendChild(document.createTextNode(name + ": " + FMT.long(pop)));
        list_el.appendChild(li) 

        li.onmouseover = () => {
            document.getElementById(id).style.stroke= 'red';
        }
        li.onmouseleave = () => {
            document.getElementById(id).style.stroke= null;
        }
    });

    const groups_el = document.getElementById('group-pops');
    for (let ix = 0; ix < N_GROUPS; ++ix) {
        const el = document.createElement("tr");
        el.id = 'pop-'+ix;
        el.style.color = COLORS[ix];
        groups_el.appendChild(el);
    }

    const total_pop = sorted_counties.reduce((acc, r) => acc + r.pop, 0);
    const groups = Object.fromEntries(county_ids.map(id => [id, 0]));

    return [groups, total_pop];
};

const [GROUPS, TOTAL] = setup();
updateDisplay(Object.keys(GROUPS)); </script>

</html>